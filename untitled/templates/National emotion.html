<!DOCTYPE html>
<html>
  <head>
    <title>TMC Template</title>
    <meta content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no' name='viewport'>
    <meta content='text/html;charset=utf-8' http-equiv='content-type'>
    <meta content='Flat administration template for Twitter Bootstrap. Twitter Bootstrap 3 template with Ruby on Rails support.' name='description'>
    <link href='assets/images/meta_icons/favicon.ico' rel='shortcut icon' type='image/x-icon'>
    <link href='assets/images/meta_icons/apple-touch-icon.png' rel='apple-touch-icon-precomposed'>
    <link href='assets/images/meta_icons/apple-touch-icon-57x57.png' rel='apple-touch-icon-precomposed' sizes='57x57'>
    <link href='assets/images/meta_icons/apple-touch-icon-72x72.png' rel='apple-touch-icon-precomposed' sizes='72x72'>
    <link href='assets/images/meta_icons/apple-touch-icon-114x114.png' rel='apple-touch-icon-precomposed' sizes='114x114'>
    <link href='assets/images/meta_icons/apple-touch-icon-144x144.png' rel='apple-touch-icon-precomposed' sizes='144x144'>
    <!-- / START - page related stylesheets [optional] -->
    <link href="assets/stylesheets/plugins/bootstrap_daterangepicker/bootstrap-daterangepicker.css" media="all" rel="stylesheet" type="text/css" />
    <link href="assets/stylesheets/plugins/fullcalendar/fullcalendar.css" media="all" rel="stylesheet" type="text/css" />
    <link href="assets/stylesheets/plugins/common/bootstrap-wysihtml5.css" media="all" rel="stylesheet" type="text/css" />
    <!-- / END - page related stylesheets [optional] -->
    <!-- / bootstrap [required] -->
    <link href="assets/stylesheets/bootstrap/bootstrap.css" media="all" rel="stylesheet" type="text/css" />
    <!-- / theme file [required] -->
    <link href="assets/stylesheets/light-theme.css" media="all" id="color-settings-body-color" rel="stylesheet" type="text/css" />
    <!-- / coloring file [optional] (if you are going to use custom contrast color) -->
    <link href="assets/stylesheets/theme-colors.css" media="all" rel="stylesheet" type="text/css" />
    <!-- / demo file [not required!] -->
    <link href="assets/stylesheets/demo.css" media="all" rel="stylesheet" type="text/css" />
    <!--[if lt IE 9]>
      <script src="assets/javascripts/ie/html5shiv.js" type="text/javascript"></script>
      <script src="assets/javascripts/ie/respond.min.js" type="text/javascript"></script>
    <![endif]-->
	  	  
	  <!-- / jquery [required] -->
    <script src="assets/javascripts/jquery/jquery.min.js" type="text/javascript"></script>
    <!-- / jquery mobile (for touch events) -->
    <script src="assets/javascripts/jquery/jquery.mobile.custom.min.js" type="text/javascript"></script>
    <!-- / jquery migrate (for compatibility with new jquery) [required] -->
    <script src="assets/javascripts/jquery/jquery-migrate.min.js" type="text/javascript"></script>
    <!-- / jquery ui -->
    <script src="assets/javascripts/jquery/jquery-ui.min.js" type="text/javascript"></script>
    <!-- / jQuery UI Touch Punch -->
    <script src="assets/javascripts/plugins/jquery_ui_touch_punch/jquery.ui.touch-punch.min.js" type="text/javascript"></script>
    <!-- / bootstrap [required] -->
    <script src="assets/javascripts/bootstrap/bootstrap.js" type="text/javascript"></script>
    <!-- / modernizr -->
    <script src="assets/javascripts/plugins/modernizr/modernizr.min.js" type="text/javascript"></script>
    <!-- / retina -->
    <script src="assets/javascripts/plugins/retina/retina.js" type="text/javascript"></script>
    <!-- / theme file [required] -->
    <script src="assets/javascripts/theme.js" type="text/javascript"></script>
    <!-- / demo file [not required!] -->
    <script src="assets/javascripts/demo.js" type="text/javascript"></script>
	  
	  <script src="ajax.js" type="text/javascript"></script>

	  <script src="echarts.js"></script>
	  
		<script src="world.js" type="text/javascript"></script>
	  
	  	   <script type="text/javascript">GetMydata("National_emotion")</script>

  </head>
  <body class='contrast-fb'>
    <header>
      <nav class='navbar navbar-default'>
        <a class='navbar-brand' href='index.html'>
          <img width="81" height="21" class="logo" alt="Flatty" src="assets/images/logo.svg" />
          <img width="21" height="21" class="logo-xs" alt="Flatty" src="assets/images/logo_xs.svg" />
        </a>
        <a class='toggle-nav btn pull-left' href='#' style="margin-right:15px;">
          <i class='icon-reorder'></i>
        </a>
        <!--
          这个地方是动态菜单配置的地方，可以通过后台技术语言，查询当前登录用户拥有的菜单权限。
          <@%
            foreach(var item in list){
              <a class='nav-list btn btn-sm btn-menu pull-left' href='#' tag="@item.menuId">
                <i class='@item.menuIcon'></i>
                @item.menuName;
              </a>
            }
          %>
        -->
        <a class='nav-list btn btn-sm btn-menu pull-left' href='#' tag="fb7aa704-4a6e-4892-b565-a93577eedff2">
          <i class='icon-github-alt'>舆情平台</i>
          
        </a>
        <a class='nav-list btn btn-sm btn-menu pull-left' href='#' tag="f69dd837-24d5-4957-9611-80f1e78d3d1f">
          <i class='icon-github-alt'>测试菜单2</i>
          
        </a>
      </nav>
    </header>
    <div id='wrapper'>
      <div id='main-nav-bg'></div>
      <nav id='main-nav'>
        <div class='navigation'>
          <ul id="menu_nav" class='nav nav-stacked'>
            <!--菜单开始-->
            <!--菜单内容为从数据库中动态查询-->
            <li class=''>
              <a href='index.html'>
                <i class='icon-dashboard'></i>
                <span>事件定义</span>
              </a>
            </li>
            <li class=''>
              <a class="dropdown-collapse" href="#"><i class='icon-edit'></i>
              <span>舆情监控</span>
              <i class='icon-angle-down angle-down'></i>
              </a>
      
              <ul class='nav nav-stacked' id="second-nav">
                
              </ul>
            </li>
            
              <li><a class='dropdown-collapse ' href='#'>
                <i class='icon-tint'></i>
                <span>舆情分析</span>
                <i class='icon-angle-down angle-down'></i>
              </a>
              <ul class='nav nav-stacked'>
                <li class=''>
                  <a href='Trend analysis.html'>
                    <i class='icon-caret-right'></i>
                    <span>趋势分析</span>
                  </a>
                </li>
                <li class=''>
                  <a href='Media distribution.html'>
                    <i class='icon-caret-right'></i>
                    <span>媒体国家分布</span>
                  </a>
                </li>
				  <li class=''>
                  <a href='Event distribution.html'>
                    <i class='icon-caret-right'></i>
                    <span>事件地点分布</span>
                  </a>
                </li>
				  <li class='active'>
                  <a href='National emotion.html'>
                    <i class='icon-caret-right'></i>
                    <span>国家情感</span>
                  </a>
                </li>
				  
				  <li class=''>
                  <a href='Word cloud.html'>
                    <i class='icon-caret-right'></i>
                    <span>词云图</span>
                  </a>
                </li>
              </ul>
            </li>
            

            <!--菜单结束-->
          </ul>
        </div>
      </nav>
      <section id='content'>
        <div class='container'>
          <div class='row' id='content-wrapper'>
            <div class='col-xs-12'>
              <div class='page-header page-header-with-buttons'>
                <h1 class='pull-left'>
                  <i class='icon-dashboard'></i>
                  <!--页面标题-->
                  <span>基于GDELT的西方媒体舆情分析系统-国家情感</span>
                </h1>
                <!--这边的按钮为可选项-->
                
              </div>
            </div>
          </div>
          
			
			
		
			
			
			
			
	  <script type="text/javascript">
	
		  var mydata1 = [];        
		  $.each(mydata, function (i, obj) {
       		var c = {};   
          $.each(obj, function (key, val) {
                if (key == 'valu') {  
                   c['value'] = val[0];
                } else {  
                   c[key]=val;
                }
            });
            mydata1.push(c);
        });
		  
		  var mydata2 = [];        
		  $.each(mydata, function (i, obj) {
       		var c = {};   
          $.each(obj, function (key, val) {
                if (key == 'valu') {  
                   c['value'] = val[1];
                } else {  
                   c[key]=val;
                }
            });
            mydata2.push(c);
        });
		  
		  var mydata3 = [];        
		  $.each(mydata, function (i, obj) {
       		var c = {};   
          $.each(obj, function (key, val) {
                if (key == 'valu') {  
                   c['value'] = val[2];
                } else {  
                   c[key]=val;
                }
            });
            mydata3.push(c);
        });
		  
		  var mydata4 = [];        
		  $.each(mydata, function (i, obj) {
       		var c = {};   
          $.each(obj, function (key, val) {
                if (key == 'valu') {  
                   c['value'] = val[3];
                } else {  
                   c[key]=val;
                }
            });
            mydata4.push(c);
        });
	  </script>
		
			
			
			
			
			
			
			
 <div id="main" style="height: 500px;"></div>
	<script>
		function NationalEmotion()
		{
			
			var mydata1 = [];        
		  $.each(mydata, function (i, obj) {
       		var c = {};   
          $.each(obj, function (key, val) {
                if (key == 'valu') {  
                   c['value'] = val[0];
                } else {  
                   c[key]=val;
                }
            });
            mydata1.push(c);
        });
		  
		  var mydata2 = [];        
		  $.each(mydata, function (i, obj) {
       		var c = {};   
          $.each(obj, function (key, val) {
                if (key == 'valu') {  
                   c['value'] = val[1];
                } else {  
                   c[key]=val;
                }
            });
            mydata2.push(c);
        });
		  
		  var mydata3 = [];        
		  $.each(mydata, function (i, obj) {
       		var c = {};   
          $.each(obj, function (key, val) {
                if (key == 'valu') {  
                   c['value'] = val[2];
                } else {  
                   c[key]=val;
                }
            });
            mydata3.push(c);
        });
		  
		  var mydata4 = [];        
		  $.each(mydata, function (i, obj) {
       		var c = {};   
          $.each(obj, function (key, val) {
                if (key == 'valu') {  
                   c['value'] = val[3];
                } else {  
                   c[key]=val;
                }
            });
            mydata4.push(c);
        });
			
			
	 var myChart = echarts.init(document.getElementById('main'));
		var option = {
   backgroundColor: new echarts.graphic.RadialGradient(0.5, 0.5, 0.4, [{
        offset: 0,
        color: '#4b5769'
    }, {
        offset: 1,
        color: '#404a59'
    }]),

  tooltip: {
            trigger: 'item',
            formatter: function(params) {
                var res = params.name+'<br/>';
                var myseries = option.series;
                for (var i = 0; i < myseries.length; i++) {
                    for(var j=0;j<myseries[i].data.length;j++){
                        if(myseries[i].data[j].name==params.name){
                            res+=myseries[i].name +' : '+myseries[i].data[j].value+'</br>';
                        }
                    }
                }
                return res;
            }
        },
   
   
    series: [
        {
            name: '正向情感',
            type: 'map',
            mapType: 'world',
            roam: true,
            itemStyle:{
                emphasis:{label:{show:true}}
            },
            data:mydata1
        },
		{
            name: '负向情感',
            type: 'map',
            mapType: 'world',
            roam: true,
            itemStyle:{
                emphasis:{label:{show:true}}
            },
            data:mydata2
        },
		{
            name: '情绪化指标',
            type: 'map',
            mapType: 'world',
            roam: true,
            itemStyle:{
                emphasis:{label:{show:true}}
            },
            data:mydata3
        },
		{
            name: '主动性',
            type: 'map',
            mapType: 'world',
            roam: true,
            itemStyle:{
                emphasis:{label:{show:true}}
            },
            data:mydata4
        }
		
    ]
};
  myChart.setOption(option);
	    console.info("图生成函数执行");
}
			setTimeout("NationalEmotion()",2000); 
			console.info("图生成函数延时执行");
	</script>
				
			
			
			
			
			
			
			
			
			
			
			
			
			
			
          <footer id='footer'>
            <div class='footer-wrapper'>
              <div class='row'>
                <div class='col-sm-6 text'>
                  Copyright © 2018 <a href="http://tton.co/" target="_blank">TTON</a>.TMC
                </div>
              </div>
            </div>
          </footer>
        </div>
      </section>
    </div>
    
	  
	  
	  
	 
	  
	  
	  

	<script type="text/javascript">Initialization()</script>
	 <script type="text/javascript">get_Number_of_events()</script>
		
    </script>
  </body>
	
</html>